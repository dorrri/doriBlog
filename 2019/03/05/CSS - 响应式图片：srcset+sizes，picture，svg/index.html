<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Huangrui,dorih@qq.com"><title>响应式图片：srcset+sizes，picture，svg · dorrri</title><meta name="description" content="响应式图片可以根据不同的设备屏幕大小从而选择加载不同的图片，从而节省带宽。实现响应式图片有三种方法：srcset+sizes 属性、picture 标签、svg
1. srcset+sizessrcset 是 img 标签的一个属性，它可以提供一系列图片源，供浏览器在不同设备屏幕大小和像素密度下选择"><meta name="keywords" content="HTML,CSS,JavaScript,daily"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><!--img(src= url_for('images/logo@2x.png'), style="width:127px;")--><h3 title><a href="/">dorrri</a></h3><div class="description"><p>dorrri's personal blog</p></div></div></div><ul class="social-links"><li><a href="http://github.com/dorrri"><i class="fa fa-github"></i></a></li></ul><div class="footer"><span>Theme based on</span><a target="_blank" href="https://github.com/Ben02/hexo-theme-Anatole"> Anatole</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><!--li--><!--  if is_current('links')--><!--    a.current(href="/links")= __('Links')--><!--  else--><!--    a(href="/links")= __('Links')--></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>响应式图片：srcset+sizes，picture，svg</a></h3></div><div class="post-content"><p>响应式图片可以根据不同的设备屏幕大小从而选择加载不同的图片，从而节省带宽。实现响应式图片有三种方法：srcset+sizes 属性、picture 标签、svg</p>
<h3 id="1-srcset-sizes"><a href="#1-srcset-sizes" class="headerlink" title="1. srcset+sizes"></a>1. srcset+sizes</h3><p>srcset 是 img 标签的一个属性，它可以提供一系列图片源，供浏览器在不同设备屏幕大小和像素密度下选择适合的图片。W3C 规范中的描述：srcset 属性允许作者根据不同分辨率或不同视窗尺寸提供多个不同分辨率图像。用户代理会根据之前获取的任何资源做选择，从而避免多个资源加载浪费带宽和相关性能问题。</p>
<p>使用语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 &lt;img src=&quot;selina.jpg&quot; alt=&quot;alt&quot;</span><br><span class="line">2      srcset=&quot;100-s1.jpg 100w,300-s1.jpg 300w,600-s2.jpg 600w,800-s2.jpg 800w&quot;</span><br><span class="line">3      sizes=&quot;(max-width:500px) 300px,(max-width:1000px) 500px,100vw&quot;/&gt; </span><br><span class="line">4 </span><br><span class="line">5 &lt;img src=&quot;selina.jpg&quot; alt=&quot;alt&quot;</span><br><span class="line">6      srcset=&quot;100-s1.jpg 1x,600-s2.jpg 2x&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<p>其中 sizes 的媒体条件中的 px 可替换成 rem、em 等相对单位，或 vw 相对于视口的百分比大小。</p>
<p>srcset 中提供了一系列图片源，每个资源之间用逗号隔开，资源由图片的 url 与显示条件构成。</p>
<ul>
<li>以 w 结尾表示条件为像素，如第一条语句中表示 100-s1 的固定宽度为 100 像素，当设备视口宽度小于等于 100px 时选择 100-s1 图片，当设备视口宽度小于等于 300px 时选择 300-s1 图片。</li>
<li>以 x 结尾表示条件为像素密度，第二条语句表示当设备像素密度为 1 时选择 100-s1 图片，当设备像素密度为 2 时选择 600-s2 图片。</li>
</ul>
<p>第一条语句中的 sizes 属性是为响应式图片设置的断点，它表示怎样根据视口宽度来选择图片，如果不设置 sizes，那么它默认的是 100vw，也就是永远根据 100% 视口宽度来选择图片源。sizes 属性值一般由一系列媒体条件构成，媒体条件后跟一个该条件下的图片预估宽度，每个条件以逗号隔开，最后没有媒体条件的预估宽度表示默认值。</p>
<p>第一条语句中的 sizes 表示当设备视口宽度小于等于 500px 时，当前预估图片尺寸为 300px，那么浏览器将会在图片源中查找符合条件的图片，并且查找的原则首先是图片固定宽度应该大于等于预估宽度，然后图片宽度是最接近预估宽度的。当媒体条件都不满足时，就采用默认值 100vw，也就是将 100% 视口宽度作为预估宽度来选择图片。</p>
<p>另外由于浏览器验证媒体条件时如果第一个条件为真，那么就会停止验证，因此媒体条件的顺序也应该按照从小到大的规律排列，否则后面的小范围条件将会不起作用。</p>
<p>目前大多数浏览器都支持 srcset 属性，但是我自己测试的在 chrome 72.0 上的显示效果很奇怪，没搞懂怎么回事。</p>
<p>W3C 规范是这样描述<code>srcset</code>:<code>srcset</code>属性允许作者根据不同分辨率或不同的视窗尺寸提多个不同分辨图像。用户代理会根据之前获取的任何资源做选择，从而避免多个资源加载浪费带宽和相关性能问题著作权归作者所有。</p>
<h3 id="2-picture-标签"><a href="#2-picture-标签" class="headerlink" title="2. picture 标签"></a>2. picture 标签</h3><p>picture 元素是 HTML5 的新特性，它允许你放置多个 source 标签，指定不同的图像文件名，根据媒体条件（视口高度 viewport height、宽度 width、方向 orientation）或像素密度来选择图片进行加载。</p>
<p>使用语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> 1 &lt;picture&gt;</span><br><span class="line"> 2       &lt;source media=&quot;max-width:800px&quot;</span><br><span class="line"> 3  </span><br><span class="line"> 4             srcset=&quot;image800.jpg 800w,</span><br><span class="line"> 5                     image1406.jpg 1406w</span><br><span class="line"> 6             &quot;</span><br><span class="line"> 7  </span><br><span class="line"> 8             sizes=&quot;(min-width:530px) calc(100vw - 96px),</span><br><span class="line"> 9                    100vw&quot;</span><br><span class="line">10        &gt;</span><br><span class="line">11  </span><br><span class="line">12        &lt;img alt=&quot;aaa&quot;</span><br><span class="line">13           src=&quot;689.jpg&quot;</span><br><span class="line">14  </span><br><span class="line">15           srcset=&quot;689.jpg 689w,</span><br><span class="line">16                   1378.jpg 1378w,</span><br><span class="line">17                   500.jpg 500w</span><br><span class="line">18                   1000.jpg 1000w&quot;</span><br><span class="line">19  </span><br><span class="line">20          size=&quot;(min-width:1066px) 689px</span><br><span class="line">21                 calc(75vw - 137px)&quot;</span><br><span class="line">22        &gt;</span><br><span class="line">23   &lt;/picture&gt;</span><br></pre></td></tr></table></figure></p>
<p>当符合 source 标签中的 media 条件时，选择 source 中的图片源，否则使用 img 中的图片源。</p>
<p>picture 元素内部的 source 与 img 的关系像是相片与相框的关系，相框带有一个底图，当你有很多不同尺寸的图片时，你试图找到第一个合适尺寸的照片放到相框里，如果没有，就不放照片而用相框本身的底图，picture 就是告诉你这个相框只能在这些图片里找合适的。</p>
<p>另外还支持选择不同格式的图片：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 &lt;picture&gt;</span><br><span class="line">2        &lt;source type=&quot;image/webpp&quot; srcset=&quot;snow.webp&quot;&gt;</span><br><span class="line">3        &lt;img src=&quot;snow.jpg&quot; alt=&quot;a cat&quot;&gt;</span><br><span class="line">4 &lt;/picture&gt;</span><br></pre></td></tr></table></figure></p>
<p>如果浏览器支持 webp 格式，则加载 snow.webp，否则加载 jpg 图片。</p>
<p>目前大多数浏览器也已支持 picture，如果有特殊情况，可以使用 picturefill 工具来兼容各个浏览器。</p>
<h3 id="3-svg"><a href="#3-svg" class="headerlink" title="3. svg"></a>3. svg</h3><p>通过 img 标签插入 svg 矢量图也可以达到实现响应式图片的效果，但是这种方法不能用 JavaScript 来操作图像，而且只能使用内联 css 样式来控制图像，也不能使用 css 伪类。<br>另外一种方法是可以直接在 HTML 中插入 svg 代码，svg 代码应该包含在 <code>&lt;svg&gt;&lt;/svg &gt;</code>中。<br>最后还可以通过 iframe 嵌入 svg 文档。</p>
<p>具体可参考：<a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-03-05</span><i class="fa fa-tag"></i><a class="tag" href="/categories/CSS/" title="CSS">CSS </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://dorrri.github.io/doriBlog/2019/03/05/CSS - 响应式图片：srcset+sizes，picture，svg/,dorrri,响应式图片：srcset+sizes，picture，svg,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/03/28/CSS-transform-origin（变形原点）解析/" title="CSS-transform-origin（变形原点）解析">上一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":300},"mobile":{"show":true}});</script></body></html>